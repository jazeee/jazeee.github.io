{"version":3,"sources":["webpack:///./src/hooks/window-hooks.js","webpack:///./src/components/skills/plot.js"],"names":["getWindowDimensions","_window","window","width","outerWidth","height","outerHeight","SkillsPlot","props","_useState","useState","highlightedSkillName","setHighlightedSkillName","isNarrowWidth","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","useWindowDimensions","_props$skillType","skillType","_props$showTitle","showTitle","subSkills","skills","getSkillData","minimumYearToInclude","data","Object","keys","map","name","index","subSkill","_subSkill$scoreWeight","scoreWeight","isCurrentSkill","subSkillExperience","experience","xValues","yValues","values","value","distanceToCurrent","length","x","y","type","hoverinfo","marker","color","getColor","highlightSkillName","_ref","_ref3$data","points","react_default","a","createElement","react_plotly_default","useResizeHandler","className","classNames","plot","layout","title","undefined","autosize","xaxis","yaxis","showticklabels","barmode","hovermode","showlegend","onHover","onUnhover","onClick","onLegendClick","_ref4","curveNumber","datum","onLegendDoubleClick","__webpack_exports__","plot_SkillsPlot"],"mappings":"oNAEA,SAASA,IAAsB,IAAAC,EACsBC,OACnD,MAAO,CACLC,MAH2BF,EACrBG,WAGNC,OAJ2BJ,EACFK,sDCItB,IAAMC,EAAa,SAAAC,GAAS,IAAAC,EACuBC,mBAAS,IAA1DC,EAD0BF,EAAA,GACJG,EADIH,EAAA,GAG3BI,EDAD,WAA+B,IAAAJ,EACYC,mBAC9CV,KADKc,EAD6BL,EAAA,GACXM,EADWN,EAAA,GAcpC,OATAO,oBAAU,WACR,SAASC,IACPF,EAAoBf,KAItB,OADAE,OAAOgB,iBAAiB,SAAUD,GAC3B,kBAAMf,OAAOiB,oBAAoB,SAAUF,KACjD,IAEIH,ECfWM,GAAVjB,OACuB,IAHEkB,EAIoBb,EAA7Cc,iBAJyB,IAAAD,EAIb,WAJaA,EAAAE,EAIoBf,EAArBgB,iBAJC,IAAAD,KAK3BE,EAAYC,IAAOC,aAAaL,EAAW,CAC/CM,qBAAsB,OAGlBC,EADgBC,OAAOC,KAAKN,GACPO,IAAI,SAACC,EAAMC,GACpC,IAAMC,EAAWV,EAAUQ,GADmBG,EAEAD,EAAtCE,mBAFsC,IAAAD,EAExB,EAFwBA,EAEnBE,EAAmBH,EAAnBG,eACrBC,EAAqBJ,EAASK,WAC9BC,EAAUX,OAAOC,KAAKQ,GACtBG,EAAUZ,OAAOa,OAAOJ,GAAoBP,IAAI,SAACY,EAAOV,GAC5D,IAAMW,EAAoBJ,EAAQK,OAASZ,EAG3C,OAAOU,GADYP,GAAeC,EADR,EAAI,IAAMO,EAAoB,GACe,MAGzE,MAAO,CAELZ,KAAMA,EACNc,EAAGN,EACHO,EAAGN,EACHO,KAAM,MACNC,UAAW,OACXC,OAAQ,CACNC,MACGzC,GAAwBA,IAAyBsB,EAE9C,OADAoB,YAASnB,OAMfoB,EAAqB,SAAAC,GAAgB,IAAAC,IAAAD,EAAbE,QACF,IADe,IAEV,IAAvB5B,KACRjB,QAHyC,IAAA4C,EAE1B,GAF0BA,GAGZvB,OAmB/B,OACEyB,EAAAC,EAAAC,cAACC,EAAAF,EAAD,CACE9B,KAAMA,EACNiC,kBAAkB,EAClBC,UAAWC,IAAWC,KACtBC,OAAQ,CACNC,MAAO3C,EAAYF,OAAY8C,EAC/BC,UAAU,EACVC,MAAO,CACLH,MAAO,QAETI,MAAO,CACLJ,MAAO,uBACPK,gBAAgB,GAElBC,QAAS,QACTC,UAAW,UACXC,YAAa9D,GAEf+D,QAAStB,EACTuB,UAAW,kBAAMjE,EAAwB,KACzCkE,QAASxB,EACTyB,cAtCkB,SAAAC,GAAqB,IAAlBC,EAAkBD,EAAlBC,YACjBC,EAAQrD,EAAKoD,GACnB,GAAIC,EAAO,KACDjD,EAASiD,EAATjD,KAGNrB,EADED,IAAyBsB,EACH,GAEAA,QAG1BrB,EAAwB,IAE1B,OAAO,GA0BLuE,oBAAqB,kBAAM,MAKlBC,EAAA,iBAAA5E,GAAK,OAAIkD,EAAAC,EAAAC,cAACyB,EAAe7E","file":"16-6903c73a0c3e9c2cf615.js","sourcesContent":["import { useState, useEffect } from \"react\";\n\nfunction getWindowDimensions() {\n  const { outerWidth: width, outerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nexport function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions()\n  );\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return windowDimensions;\n}\n","import React, { useState } from \"react\";\nimport classNames from \"./skills.module.css\";\nimport { skills } from \"../../data/utils\";\nimport Plot from \"react-plotly.js\";\nimport { getColor } from \"../../utils/colors\";\nimport { useWindowDimensions } from \"../../hooks/window-hooks\";\n\nexport const SkillsPlot = props => {\n  const [highlightedSkillName, setHighlightedSkillName] = useState(\"\");\n  const { width } = useWindowDimensions();\n  const isNarrowWidth = width <= 480;\n  const { skillType = \"Language\", showTitle = true } = props;\n  const subSkills = skills.getSkillData(skillType, {\n    minimumYearToInclude: 2010,\n  });\n  const subSkillNames = Object.keys(subSkills);\n  const data = subSkillNames.map((name, index) => {\n    const subSkill = subSkills[name];\n    const { scoreWeight = 1.0, isCurrentSkill } = subSkill;\n    const subSkillExperience = subSkill.experience;\n    const xValues = Object.keys(subSkillExperience);\n    const yValues = Object.values(subSkillExperience).map((value, index) => {\n      const distanceToCurrent = xValues.length - index;\n      const currentMultiplier = 1 + 16 / (distanceToCurrent + 6);\n      const multiplier = scoreWeight * (isCurrentSkill ? currentMultiplier : 1);\n      return value * multiplier;\n    });\n    return {\n      // Word wrap name at 20 characters\n      name: name,\n      x: xValues,\n      y: yValues,\n      type: \"bar\",\n      hoverinfo: \"name\",\n      marker: {\n        color:\n          !highlightedSkillName || highlightedSkillName === name\n            ? getColor(index)\n            : \"gray\",\n      },\n    };\n  });\n\n  const highlightSkillName = ({ points }) => {\n    const [point] = points || [];\n    const { data = {} } = point || {};\n    setHighlightedSkillName(data.name);\n  };\n\n  const onLegendClick = ({ curveNumber }) => {\n    const datum = data[curveNumber];\n    if (datum) {\n      const { name } = datum;\n      // FIXME (jsingh): highlightedSkillName doesn't seem to change.\n      if (highlightedSkillName === name) {\n        setHighlightedSkillName(\"\");\n      } else {\n        setHighlightedSkillName(name);\n      }\n    } else {\n      setHighlightedSkillName(\"\");\n    }\n    return false;\n  };\n\n  return (\n    <Plot\n      data={data}\n      useResizeHandler={true}\n      className={classNames.plot}\n      layout={{\n        title: showTitle ? skillType : undefined,\n        autosize: true,\n        xaxis: {\n          title: \"Year\",\n        },\n        yaxis: {\n          title: \"Relative Skill Level\",\n          showticklabels: false,\n        },\n        barmode: \"stack\",\n        hovermode: \"closest\",\n        showlegend: !isNarrowWidth,\n      }}\n      onHover={highlightSkillName}\n      onUnhover={() => setHighlightedSkillName(\"\")}\n      onClick={highlightSkillName}\n      onLegendClick={onLegendClick}\n      onLegendDoubleClick={() => false}\n    />\n  );\n};\n\nexport default props => <SkillsPlot {...props}></SkillsPlot>;\n"],"sourceRoot":""}